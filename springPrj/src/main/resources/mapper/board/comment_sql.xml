<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="comment">

	<select id="replyList" resultType="hashmap">
		<![CDATA[
			SELECT
				REPLY_NO,
				ARTICLE_NO,
				COMMENT,
				WRITER,
				IF(
					DATE_FORMAT(REG_DATE, '%Y%m%d') < DATE_FORMAT(now(),'%Y%m%d'),
					DATE_FORMAT(REG_DATE, '%Y.%m.%d'),
					DATE_FORMAT(REG_DATE, '%H:%i')
				) as REG_DATE
			FROM
				tbl_reply
			WHERE
				ARTICLE_NO = #{ articleNo}
			ORDER BY
				REPLY_NO
		]]>
	</select>
	
	<insert id="registerComment" parameterType="hashmap">
		<![CDATA[
			INSERT INTO tbl_reply
            (
				ARTICLE_NO,
				COMMENT,
				WRITER
            )
            VALUES
            (
                #{ articleNo},
                #{ comments},
                #{ writer}
            )
		]]>
	</insert>

</mapper>