<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xmlns:security="http://www.springframework.org/schema/security"
		xmlns:context="http://www.springframework.org/schema/context"
		xsi:schemaLocation="http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-4.1.xsd
							http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
							http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd">

		<security:http pattern="/resources/**" security="none"/>
		<security:http auto-config="true">
			<security:intercept-url pattern="/**" access="permitAll"/>
		    
		    <security:form-login
		    	login-page="/accounts/loginform"
		    	default-target-url="/"
		    />
		    
		    <security:logout
		    	logout-url="/accounts/logout"
		    	logout-success-url="/"
		    />
		</security:http>
		
		<security:authentication-manager>
			<security:authentication-provider user-service-ref="userService"/>
		</security:authentication-manager>
		
		<security:jdbc-user-service data-source-ref="dataSource" id="userService"
			users-by-username-query=" select u.ID as username, u.PASSWORD as password, a.ENABLED from test_user u inner join test_auth a on u.ID=a.ID where u.ID=?"
			authorities-by-username-query="select ID as username, AUTHORITY from test_auth where ID=?"
		/>
		
</beans>